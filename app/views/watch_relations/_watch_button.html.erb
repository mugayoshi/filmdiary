<% if current_user.watched?(film) %>
  <%= form_for(current_user.watch_relations.find_by(film_id: film.id), html: { method: :delete }) do |f| %>
    <%= hidden_field_tag :film_id, film.id %>
    <%= f.submit 'Unwatch', class: 'btn btn-danger btn-block' %>
  <% end %>
<% else %>
  <%= form_for(current_user.watch_relations.build) do |f| %>
    <div class="form-group">
      <%= hidden_field_tag :film_id, film.id %>
    </div>

    <div class="form-group">
      <%= f.label :rate, 'rate' %>
      <%= f.number_field :rate, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.label :comment, 'comment' %>
      <%= f.text_field :comment, class: 'form-control' %>
    </div>
    <%= f.submit 'watched', class: 'btn btn-primary btn-block' %>
  <% end %>
<% end %>